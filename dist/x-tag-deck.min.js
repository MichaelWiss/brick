!function(){function a(a){return a.__transitions__=a.__transitions__||{},a.__transitions__}function b(a,b,c){var e=getComputedStyle(a),f=c[b].after;a.setAttribute("transition",b),f&&!e[h].match(d)&&f()}var c,d=/[1-9]/,e=/ /g,f=/(\d|\d+?[.]?\d+?)(s|ms)(?!\w)/gi,g="transition"in getComputedStyle(document.documentElement)?"t":xtag.prefix.js+"T",h=g+"ransitionDuration",i=g+"ransitionProperty",j=function(a){xtag.requestFrame(function(){xtag.requestFrame(a)})};c="complete"==document.readyState?j(function(){c=!1}):xtag.addEvent(document,"readystatechange",function(){"complete"==document.readyState&&(j(function(){c=!1}),xtag.removeEvent(document,"readystatechange",c))}),xtag.addEvents(document,{transitionend:function(b){var c=b.target,d=c.getAttribute("transition");if(d){var g=0,j=0,k=null,l=getComputedStyle(c),m=a(c),n=l[i].replace(e,"").split(",");if(l[h].replace(f,function(a,b,c){b=parseFloat(b)*("s"===c?1e3:1),b>j&&(k=g,j=b),g++}),k=n[k],!k)throw new SyntaxError("No matching transition property found");b.propertyName==k&&m[d].after&&m[d].after()}}}),xtag.transition=function(d,e,f){var g=a(d),h=g[e]=f||{};h.immediate&&h.immediate(),h.before?(h.before(),c?xtag.skipTransition(d,function(){b(d,e,g)}):j(function(){b(d,e,g)})):b(d,e,g)},xtag.pseudos.transition={onCompiled:function(a,b){var c={},d=b.arguments[0]||"immediate",e=b.arguments[1]||b.key.split(":")[0];return function(){var b=this,f=arguments;return this.hasAttribute("transition")?(c[d]=function(){return a.apply(b,f)},xtag.transition(this,e,c),void 0):a.apply(this,f)}}}}(),function(){function a(a,b){return Array.prototype.indexOf.call(a.children,b)}function b(a,b){return b&&b.nodeName?b:isNaN(b)?xtag.queryChildren(a,b):a.children[b]}function c(a,b,c){return b&&(c?b==a.xtag.selected:b!=a.xtag.selected)&&a==b.parentNode&&"X-CARD"==b.nodeName}function d(a,b,c){var d=e[b],f=a.xtag.selected&&a.xtag.selected[d[0]];f?a.showCard(f,c):(a.loop||-1==a.selectedIndex)&&a.showCard(a[d[1]],c)}var e={next:["nextElementSibling","firstElementChild"],previous:["previousElementSibling","lastElementChild"]};xtag.register("x-deck",{events:{"reveal:delegate(x-card)":function(a){this.parentNode==a.currentTarget&&a.currentTarget.showCard(this)}},accessors:{loop:{attribute:{"boolean":!0}},cards:{get:function(){return xtag.queryChildren(this,"x-card")}},selectedCard:{get:function(){return this.xtag.selected||null},set:function(a){this.showCard(a)}},selectedIndex:{attribute:{name:"selected-index",unlink:!0},get:function(){return this.hasAttribute("selected-index")?Number(this.getAttribute("selected-index")):-1},set:function(a){var b=Number(a),c=this.cards[b];c?(this.setAttribute("selected-index",b),c!=this.xtag.selected&&this.showCard(c)):(this.removeAttribute("selected-index"),this.xtag.selected&&this.hideCard(this.xtag.selected))}},transitionType:{attribute:{name:"transition-type"}}},methods:{nextCard:function(a){d(this,"next",a)},previousCard:function(a){d(this,"previous",a)},showCard:function(d,e){var f=b(this,d);if(c(this,f,!1)){var g=this.xtag.selected,h=a(this,f);e=e||(h>a(this,g)?"forward":"reverse"),g&&this.hideCard(g,e),this.xtag.selected=f,this.selectedIndex=h,f.hasAttribute("selected")||(f.selected=!0),xtag.transition(f,"show",{before:function(){f.setAttribute("show",""),f.setAttribute("transition-direction",e)},after:function(){xtag.fireEvent(f,"show")}})}},hideCard:function(a,d){var e=b(this,a);c(this,e,!0)&&(this.xtag.selected=null,e.hasAttribute("selected")&&(e.selected=!1),xtag.transition(e,"hide",{before:function(){e.removeAttribute("show"),e.setAttribute("hide",""),e.setAttribute("transition-direction",d||"reverse")},after:function(){e.removeAttribute("hide"),e.removeAttribute("transition"),e.removeAttribute("transition-direction"),xtag.fireEvent(e,"hide")}}))}}}),xtag.register("x-card",{lifecycle:{inserted:function(){var a=this.parentNode;"X-DECK"==a.nodeName&&(this.xtag.deck=a,this!=a.selected&&this.selected&&a.showCard(this))},removed:function(){var a=this.xtag.deck;a&&(this==a.xtag.selected?(a.xtag.selected=null,a.removeAttribute("selected-index")):a.showCard(a.selectedCard),this.xtag.deck=null)}},accessors:{transitionType:{attribute:{name:"transition-type"}},selected:{attribute:{"boolean":!0},set:function(a){var b=this.xtag.deck;b&&(a&&this!=b.selected?b.showCard(this):a||this!=b.selected||b.hideCard(this))}}}})}();